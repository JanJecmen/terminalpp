name: '@PROJECT_NAME@'
base: core18
version: '@PROJECT_VERSION@'
summary: '@CPACK_PACKAGE_DESCRIPTION_SUMMARY@'
description: '@CPACK_PACKAGE_DESCRIPTION@'

grade: devel # switch to stable once tested in the store 
confinement: classic

parts:
  tpp:
    source: "./source"
    source-type: local
    plugin: cmake
    configflags: 
      - "-DCMAKE_BUILD_TYPE=@CMAKE_BUILD_TYPE@"
      - "-DCMAKE_INSTALL_PREFIX=/usr"
      - "-DCMAKE_C_COMPILER=gcc-8"
      - "-DCMAKE_CXX_COMPILER=g++-8"
    build-packages:
      - g++-8
      - libx11-dev
      - libxft-dev
      - git
    stage-packages:
      - libfontconfig1
      - libfreetype6
      - libpng16-16
      - libx11-6
      - libxau6
      - libxcb1
      - libxdmcp6
      - libxft2
      - libxrender1
      - x11-utils
    override-pull: |
      snapcraftctl pull
      # Point icon to the correct location
      sed -i -e 's|Icon=terminalpp.png|Icon=/usr/share/icons/hicolor/256x256/apps/terminalpp.png|g' resources/terminalpp.desktop      

apps:
  terminalpp:
      command: usr/bin/terminalpp
      desktop: usr/share/applications/terminalpp.desktop
      environment:
          DISABLE_WAYLAND: 1
# for legacy support of terminalpp.tpp executable in versions prior to 0.6
  tpp:
      command: usr/bin/terminalpp
      environment:
          DISABLE_WAYLAND: 1
      
          